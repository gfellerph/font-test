function _toConsumableArray(e){if(Array.isArray(e)){for(var o=0,t=Array(e.length);o<e.length;o++){t[o]=e[o]}return t}else{return Array.from(e)}}var hasPassiveEvents=false;if(typeof window!=="undefined"){var passiveTestOptions={get passive(){hasPassiveEvents=true;return undefined}};window.addEventListener("testPassive",null,passiveTestOptions);window.removeEventListener("testPassive",null,passiveTestOptions)}var isIosDevice=typeof window!=="undefined"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);var locks=[];var documentListenerAdded=false;var initialClientY=-1;var previousBodyOverflowSetting=void 0;var previousBodyPosition=void 0;var previousBodyPaddingRight=void 0;var allowTouchMove=function e(o){return locks.some((function(e){if(e.options.allowTouchMove&&e.options.allowTouchMove(o)){return true}return false}))};var preventDefault=function e(o){var t=o||window.event;if(allowTouchMove(t.target)){return true}if(t.touches.length>1)return true;if(t.preventDefault)t.preventDefault();return false};var setOverflowHidden=function e(o){if(previousBodyPaddingRight===undefined){var t=!!o&&o.reserveScrollBarGap===true;var n=window.innerWidth-document.documentElement.clientWidth;if(t&&n>0){var i=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right"),10);previousBodyPaddingRight=document.body.style.paddingRight;document.body.style.paddingRight=i+n+"px"}}if(previousBodyOverflowSetting===undefined){previousBodyOverflowSetting=document.body.style.overflow;document.body.style.overflow="hidden"}};var restoreOverflowSetting=function e(){if(previousBodyPaddingRight!==undefined){document.body.style.paddingRight=previousBodyPaddingRight;previousBodyPaddingRight=undefined}if(previousBodyOverflowSetting!==undefined){document.body.style.overflow=previousBodyOverflowSetting;previousBodyOverflowSetting=undefined}};var setPositionFixed=function e(){return window.requestAnimationFrame((function(){if(previousBodyPosition===undefined){previousBodyPosition={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left};var e=window,o=e.scrollY,t=e.scrollX,n=e.innerHeight;document.body.style.position="fixed";document.body.style.top=-o;document.body.style.left=-t;setTimeout((function(){return window.requestAnimationFrame((function(){var e=n-window.innerHeight;if(e&&o>=n){document.body.style.top=-(o+e)}}))}),300)}}))};var restorePositionSetting=function e(){if(previousBodyPosition!==undefined){var o=-parseInt(document.body.style.top,10);var t=-parseInt(document.body.style.left,10);document.body.style.position=previousBodyPosition.position;document.body.style.top=previousBodyPosition.top;document.body.style.left=previousBodyPosition.left;window.scrollTo(t,o);previousBodyPosition=undefined}};var isTargetElementTotallyScrolled=function e(o){return o?o.scrollHeight-o.scrollTop<=o.clientHeight:false};var handleScroll=function e(o,t){var n=o.targetTouches[0].clientY-initialClientY;if(allowTouchMove(o.target)){return false}if(t&&t.scrollTop===0&&n>0){return preventDefault(o)}if(isTargetElementTotallyScrolled(t)&&n<0){return preventDefault(o)}o.stopPropagation();return true};var disableBodyScroll=function e(o,t){if(!o){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(locks.some((function(e){return e.targetElement===o}))){return}var n={targetElement:o,options:t||{}};locks=[].concat(_toConsumableArray(locks),[n]);if(isIosDevice){setPositionFixed()}else{setOverflowHidden(t)}if(isIosDevice){o.ontouchstart=function(e){if(e.targetTouches.length===1){initialClientY=e.targetTouches[0].clientY}};o.ontouchmove=function(e){if(e.targetTouches.length===1){handleScroll(e,o)}};if(!documentListenerAdded){document.addEventListener("touchmove",preventDefault,hasPassiveEvents?{passive:false}:undefined);documentListenerAdded=true}}};var clearAllBodyScrollLocks=function e(){if(isIosDevice){locks.forEach((function(e){e.targetElement.ontouchstart=null;e.targetElement.ontouchmove=null}));if(documentListenerAdded){document.removeEventListener("touchmove",preventDefault,hasPassiveEvents?{passive:false}:undefined);documentListenerAdded=false}initialClientY=-1}if(isIosDevice){restorePositionSetting()}else{restoreOverflowSetting()}locks=[]};var enableBodyScroll=function e(o){if(!o){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}locks=locks.filter((function(e){return e.targetElement!==o}));if(isIosDevice){o.ontouchstart=null;o.ontouchmove=null;if(documentListenerAdded&&locks.length===0){document.removeEventListener("touchmove",preventDefault,hasPassiveEvents?{passive:false}:undefined);documentListenerAdded=false}}if(isIosDevice){restorePositionSetting()}else{restoreOverflowSetting()}};export{clearAllBodyScrollLocks as c,disableBodyScroll as d,enableBodyScroll as e};
//# sourceMappingURL=bodyScrollLock.esm-afcc00e3.js.map