{"version":3,"file":"post-logo.js","sourceRoot":"","sources":["../../../../src/components/post-logo/post-logo.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,eAAe,CAAC;AACnE,OAAO,EAAE,QAAQ,EAAE,MAAM,mBAAmB,CAAC;AAC7C,OAAO,EAAE,KAAK,EAAE,MAAM,kBAAkB,CAAC;AACzC,OAAO,EAAE,UAAU,EAAE,UAAU,EAAE,MAAM,yBAAyB,CAAC;AAOjE,MAAM,OAAO,QAAQ;EAMnB;;IACE,6KAA6K;IAC7K,IAAI,CAAC,eAAe,GAAG,QAAQ,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC;IAChE,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAAC,eAAe,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;IAC3E,IAAI,CAAC,cAAc,GAAG,IAAI,cAAc,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IAEvE,oCAAoC;IACpC,IAAI,CAAC,YAAY,EAAE,CAAC;GACrB;EAED,gBAAgB;;IACd,MAAM,eAAe,GAAG,MAAA,IAAI,CAAC,IAAI,CAAC,aAAa,0CAAE,aAAa,CAAC,2BAA2B,CAAC,CAAC;IAC5F,IAAI,eAAe,EAAE;MACnB,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;KAC9C;EACH,CAAC;EAED,oBAAoB;IAClB,MAAM,CAAC,mBAAmB,CAAC,QAAQ,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;IAC3D,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,CAAC;EACnC,CAAC;EAED,YAAY;;IACV,MAAM,eAAe,GAAG,MAAA,IAAI,CAAC,IAAI,CAAC,aAAa,0CAAE,aAAa,CAAC,2BAA2B,CAAC,CAAC;IAC5F,MAAM,UAAU,GAAG,MAAA,IAAI,CAAC,IAAI,CAAC,aAAa,0CAAE,aAAa,CAAC,cAAc,CAAC,CAAC;IAC1E,IAAI,eAAe,IAAI,UAAU;MAC/B,IAAI,CAAC,eAAe;QAClB,MAAM,CAAC,UAAU,GAAG,CAAC,GAAG,GAAG,eAAe,CAAC,WAAW,GAAG,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;EAC5F,CAAC;EAED,MAAM;;IACJ,IAAI,CAAA,MAAA,KAAK,CAAC,eAAe,0CAAE,MAAM,CAAC,IAAI,MAAK,SAAS;MAAE,OAAO;IAC7D,MAAM,MAAM,GAAG,KAAK,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC;IAEjD,OAAO,CACL,EAAC,IAAI;MACH,EAAC,UAAU,OAAG;MACd,SAAG,IAAI,EAAE,MAAM,CAAC,QAAQ,EAAE,KAAK,EAAC,MAAM;QACpC,YAAM,KAAK,EAAC,iBAAiB,IAAE,MAAM,CAAC,aAAa,CAAQ;QAC3D,EAAC,UAAU,IAAC,SAAS,EAAC,aAAa,GAAG;QACtC,WAAK,KAAK,EAAC,oBAAoB,EAAC,GAAG,EAAE,MAAM,CAAC,OAAO,EAAE,GAAG,EAAE,MAAM,CAAC,QAAQ,GAAI,CAC3E,CACC,CACR,CAAC;EACJ,CAAC;;;;;;;;;;;;;CACF","sourcesContent":["import { Component, Host, h, State, Element } from '@stencil/core';\r\nimport { throttle } from 'throttle-debounce';\r\nimport { state } from '../../data/store';\r\nimport { LogoSprite, FaviconSvg } from './logo-sprite.component';\r\n\r\n@Component({\r\n  tag: 'post-logo',\r\n  styleUrl: 'post-logo.scss',\r\n  shadow: true,\r\n})\r\nexport class PostLogo {\r\n  @State() showFaviconLogo: boolean;\r\n  @Element() host: HTMLPostLogoElement;\r\n  private throttledResize: throttle<() => void>;\r\n  private resizeObserver: ResizeObserver;\r\n\r\n  constructor() {\r\n    // Register window resize event listener and a resize observer on the mainnav controls (they change size while controls are being loaded) to display an accurately sized logo\r\n    this.throttledResize = throttle(300, () => this.handleResize());\r\n    window.addEventListener('resize', this.throttledResize, { passive: true });\r\n    this.resizeObserver = new ResizeObserver(this.handleResize.bind(this));\r\n\r\n    // Initially call the resize handler\r\n    this.handleResize();\r\n  }\r\n\r\n  componentDidLoad() {\r\n    const mainNavControls = this.host.parentElement?.querySelector('.main-navigation-controls');\r\n    if (mainNavControls) {\r\n      this.resizeObserver.observe(mainNavControls);\r\n    }\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    window.removeEventListener('resize', this.throttledResize);\r\n    this.resizeObserver.disconnect();\r\n  }\r\n\r\n  handleResize() {\r\n    const mainNavControls = this.host.parentElement?.querySelector('.main-navigation-controls');\r\n    const menuButton = this.host.parentElement?.querySelector('.menu-button');\r\n    if (mainNavControls && menuButton)\r\n      this.showFaviconLogo =\r\n        window.innerWidth - (150 + mainNavControls.clientWidth + menuButton.clientWidth) <= 0;\r\n  }\r\n\r\n  render() {\r\n    if (state.localizedConfig?.header.logo === undefined) return;\r\n    const config = state.localizedConfig.header.logo;\r\n\r\n    return (\r\n      <Host>\r\n        <LogoSprite />\r\n        <a href={config.logoLink} class=\"logo\">\r\n          <span class=\"visually-hidden\">{config.logoLinkTitle}</span>\r\n          <FaviconSvg className=\"square-logo\" />\r\n          <img class=\"logo-svg full-logo\" src={config.logoSvg} alt={config.logoText} />\r\n        </a>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"]}