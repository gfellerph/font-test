{"version":3,"file":"post-internet-footer.js","sourceRoot":"","sources":["../../../../src/components/post-internet-footer/post-internet-footer.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Host, h, State } from '@stencil/core';\r\nimport { state } from '../../data/store';\r\nimport { SvgSprite } from '../../utils/svg-sprite.component';\r\nimport { PostFooterBlockCustom } from './components/post-footer-block-custom.component';\r\nimport { PostFooterBlockList } from './components/post-footer-block-list.component';\r\nimport { PostFooterBlockAddress } from './components/post-footer-block-address.component';\r\nimport { PostFooterBlockContact } from './components/post-footer-block-contact.component';\r\n\r\n@Component({\r\n  tag: 'swisspost-internet-footer',\r\n  styleUrl: 'post-internet-footer.scss',\r\n  shadow: true,\r\n})\r\nexport class PostInternetFooter {\r\n  @State() liveSupportEnabled = false;\r\n\r\n  constructor() {\r\n    this.liveSupportEnabled = this.unbluEnabled();\r\n\r\n    /**\r\n     * If the unblu script is not available, wait 5 seconds for it to load.\r\n     * If it's still not there after 5 seconds, abandon efforts and don't\r\n     * show the live support button.\r\n     */\r\n    if (!this.liveSupportEnabled) {\r\n      let intervalId: number;\r\n      let runs = 0;\r\n\r\n      const checker = () => {\r\n        const isEnabled = this.unbluEnabled();\r\n        if (isEnabled) {\r\n          this.liveSupportEnabled = true;\r\n        }\r\n        if (isEnabled || runs >= 5) {\r\n          window.clearInterval(intervalId);\r\n        }\r\n        runs++;\r\n      };\r\n\r\n      intervalId = window.setInterval(checker, 1000);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if the unblu live support script is loaded\r\n   * @returns Boolean\r\n   */\r\n  private unbluEnabled(): boolean {\r\n    return typeof window['unbluLSLoad'] === 'function';\r\n  }\r\n\r\n  render() {\r\n    // There is something wrong entirely\r\n    if (!state) {\r\n      console.warn(\r\n        `Internet Footer: Could not load config. Please make sure that you included the <swisspost-internet-header></swisspost-internet-header> component.`,\r\n      );\r\n      return null;\r\n    }\r\n\r\n    // Config has not loaded yet\r\n    if (!state.localizedConfig) {\r\n      return null;\r\n    }\r\n\r\n    // There's no footer config\r\n    if (!state.localizedConfig.footer) {\r\n      console.warn(\r\n        `Internet Footer: Current project \"${state.projectId}\" does not include a footer config. The footer will not be rendered. Remove `,\r\n        document.querySelector('swisspost-internet-footer'),\r\n        `from your markup or configure the footer in your portal config to stop seeing this warning.`,\r\n      );\r\n      return null;\r\n    }\r\n\r\n    const footerConfig = state.localizedConfig.footer;\r\n    const customFooterConfig = state.localizedCustomConfig?.footer;\r\n\r\n    return (\r\n      <Host>\r\n        <SvgSprite />\r\n        <footer class=\"post-internet-footer light font-curve-regular\">\r\n          <h2 class=\"visually-hidden\">{footerConfig.title}</h2>\r\n          {customFooterConfig?.block && <PostFooterBlockCustom block={customFooterConfig?.block} />}\r\n          <div class=\"footer-container container\">\r\n            {footerConfig.block\r\n              .filter(block => block.columnType === 'list')\r\n              .map(block => (\r\n                <PostFooterBlockList key={block.title} block={block} />\r\n              ))}\r\n            {footerConfig.block\r\n              .filter(block => block.columnType === 'contact')\r\n              .map(block => (\r\n                <PostFooterBlockContact\r\n                  key={block.title}\r\n                  block={block}\r\n                  liveSupportEnabled={this.liveSupportEnabled}\r\n                />\r\n              ))}\r\n            {footerConfig.block\r\n              .filter(block => block.columnType === 'address')\r\n              .map(block => (\r\n                <PostFooterBlockAddress key={block.title} block={block} />\r\n              ))}\r\n          </div>\r\n          <div class=\"copyright container\">\r\n            <span class=\"bold\">{footerConfig.entry.text}</span>\r\n            <ul class=\"no-list footer-meta-links\">\r\n              {footerConfig.links\r\n                ? footerConfig.links.map(link => (\r\n                    <li key={link.url}>\r\n                      <a class=\"nav-link\" href={link.url} target={link.target}>\r\n                        {link.text}\r\n                      </a>\r\n                    </li>\r\n                  ))\r\n                : null}\r\n            </ul>\r\n          </div>\r\n        </footer>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"]}