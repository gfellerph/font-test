import{r as t,c as e,h as i,H as n,g as s}from"./p-61b09b9b.js";import{t as o,d as a}from"./p-a74b380d.js";import{g as r,p as l}from"./p-d3d78a49.js";import{u as d}from"./p-0e2ec555.js";import{s as c,d as h}from"./p-c40dce91.js";import{S as u}from"./p-2ec9f2d5.js";import{S as p}from"./p-83058e5e.js";import{I as g}from"./p-3eb881c3.js";const m=(t,e)=>{if(e===false){return t}let i;t=v(t);if(e==="auto"||e==="exact"){if(f(t)){return w(t)}i=new URL(window.location.href)}else{try{i=new URL(e,document.location.origin)}catch(i){console.warn(`Active Route: ${e} is not a valid URL. Navigation highlighting has been disabled.`);return t}}const n=y(t,i,e);if(n.length===0){return t}const s=n[0];s.main.isActiveOverride=true;if(s.sub)s.sub.isActiveOverride=true;return t};const f=t=>t.filter((t=>t.isActive)).length>0;const w=t=>t.map((t=>Object.assign(Object.assign({},t),{isActiveOverride:t.isActive,flyout:t.flyout.map((t=>Object.assign(Object.assign({},t),{linkList:t.linkList.map((t=>Object.assign(Object.assign({},t),{isActiveOverride:t.isActive})))})))})));const v=t=>t.map((t=>Object.assign(Object.assign({},t),{isActiveOverride:false,flyout:t.flyout.map((t=>Object.assign(Object.assign({},t),{linkList:t.linkList.map((t=>Object.assign(Object.assign({},t),{isActiveOverride:false})))})))})));const y=(t,e,i)=>{let n=false;const s=[];t.forEach((t=>{if(n||!t){return}try{const o=b(e,new URL(t.url),i);if(o>0){if(o===Infinity)n=true;s.push({main:t,score:o})}}catch(t){}if(t.flyout.length){t.flyout.forEach((o=>{if(o.linkList){o.linkList.forEach((o=>{if(o.isActive&&(i==="auto"||i==="exact")){n=true;return}try{const a=new URL(o.url);const r=b(e,a,i);if(r>0){if(r===Infinity)n=true;s.push({main:t,sub:o,score:r})}}catch(t){}}))}}))}}));return s.sort(((t,e)=>e.score-t.score))};const b=(t,e,i)=>{if(!t||!e||t.origin!==e.origin){return 0}if(t.pathname===e.pathname){return Infinity}if(t.pathname.length<e.pathname.length){return 0}if(i==="auto"){const i=[t.origin,...t.pathname.split("/").filter((t=>!!t))];const n=[e.origin,...e.pathname.split("/").filter((t=>!!t))];const s=x(i,n);return Math.min(i.length,n.length)===s?s:0}return 0};const x=(t,e)=>{if(!(t===null||t===void 0?void 0:t.length)||!(e===null||e===void 0?void 0:e.length)){return 0}let i=0;for(;i<Math.min(t.length,e.length);i++){if(t[i]!==e[i]){return 0}}return i};let k=null;let j=null;const O=async({projectId:t,environment:e,language:i,cookieKey:n,localStorageKey:s,activeRouteProp:o,localizedCustomConfig:a,osFlyoutOverrides:d})=>{var c,h;if(!k){k=S(t,e)}const u=await k;const p=r(Object.keys(u),i,s,n);if(p===undefined){throw new Error("Internet Header: unable to determine current language")}let g=Object.assign({},u[p]);if(a){const t=((c=a===null||a===void 0?void 0:a.header)===null||c===void 0?void 0:c.navMain)?Object.assign(Object.assign({},g.header),{navMain:[...g.header.navMain,...a.header.navMain]}):g.header;g=Object.assign(Object.assign({},g),{header:t})}if(d)g.header.navMain=C(g,d);if(o)g.header.navMain=m(g.header.navMain,o);R((h=g===null||g===void 0?void 0:g.header)===null||h===void 0?void 0:h.navMain);l(p,n,s);return g};const C=(t,e)=>{if(!e)return t.header.navMain;return t.header.navMain.map((t=>{var i,n;if(t.id!=="flyout_os")return t;if(j===null){j=JSON.parse(JSON.stringify(t))}const s=(i=e.text)!==null&&i!==void 0?i:j.text;const o=(n=e.title)!==null&&n!==void 0?n:j.title;if(!j.flyout||j.flyout.length===0||!e.flyout||e.flyout.length===0)return Object.assign(Object.assign({},t),{title:o,text:s});const a=[...j.flyout.map(((t,i)=>{var n;const s=e.flyout[i];const o=(n=s.title)!==null&&n!==void 0?n:t.title;const a=s.linkList?e.flyout[i].linkList:[];return{title:o,linkList:[...t.linkList,...a]}})),...e.flyout.slice(j.flyout.length)];return Object.assign(Object.assign({},t),{text:s,title:o,flyout:a})}))};const S=async(t,e)=>{if(!I(t)){throw new Error(`Internet Header: invalid project id "${t}"`)}if(t==="test"){e="int01"}let i=z(t,e);try{const t=await fetch(i);return await t.json()}catch(t){throw new Error(`Internet Header: fetching config failed. ${t.message}`)}};const z=(t,e)=>{if(t==="test")return"assets/config/test-configuration.json";const i=e.toLowerCase();const n=i==="prod";const s=`https://${n?"www":"int"}.post.ch`;try{return new URL(`${s}/api/headerjs/Json?serviceid=${encodeURIComponent(t)}${!n?"&environment="+i:""}`).toString()}catch(t){throw new Error(`Internet Header: Config URL is invalid.`)}};const I=t=>t!==""&&t.length>0&&/^[a-zA-Z][\w-]*[a-zA-Z0-9]$/.test(t);const L=(t,e)=>{var i;let n;try{n=typeof t==="string"?JSON.parse(t):t}catch(t){throw new Error(`Internet Header: Custom config is invalid. Make sure your custom config contains valid JSON syntax and matches the definition. `)}let s=n[e];if((i=s===null||s===void 0?void 0:s.header)===null||i===void 0?void 0:i.navMain)R(s.header.navMain);return s};const R=t=>{t.forEach((t=>{t.id=t.id==="flyout_os"?t.id:d("main-nav-")}))};const A="@swisspost/internet-header";const K="1.5.3";const N="The header for client facing applications.";const $="Swiss Post <oss@post.ch>";const F="Apache-2.0";const E={type:"git",url:"https://github.com/swisspost/design-system.git"};const T="https://next.design-system.post.ch";const J={url:"https://github.com/swisspost/design-system/issues"};const M="loader/index.cjs.js";const P="loader/index.js";const U="loader/index.es2017.js";const D="loader/index.es2017.js";const H="loader/index.d.ts";const _="dist/collection/collection-manifest.json";const q="loader/cdn.js";const X={access:"public"};const Z=["dist/","loader/"];const G={start:"stencil build --docs --watch",dev:"stencil build --watch --serve --docs --dev",build:"stencil build --docs",test:"npm run unit",unit:"jest","unit:watch":"jest --watch",e2e:"cypress run","e2e:watch":"cypress open",snapshots:"percy exec -- cypress run --browser chromium --config-file ./cypress.snapshot.config.js --record --key 0995e768-43ec-42bd-a127-ff944a2ad8c9",clean:"rimraf www dist loader storybook-static",lint:"eslint src/**/*{.ts,.tsx}","lint:fix":"eslint src/**/*{.ts,.tsx} --fix",generate:"stencil generate"};const V={"@stencil/core":"3.0.1","@stencil/store":"2.0.3","body-scroll-lock":"4.0.0-beta.0","iframe-resizer":"4.3.4",jquery:"3.6.3",tabbable:"6.1.1","throttle-debounce":"5.0.0","url-polyfill":"1.1.12"};const W={"@babel/core":"7.21.0","@percy/cli":"1.20.0","@percy/cypress":"3.1.2","@stencil/eslint-plugin":"0.4.0","@stencil/sass":"2.0.3","@swisspost/design-system-styles":"workspace:5.3.2","@types/iframe-resizer":"3.5.9","@types/jest":"26.0.24","@types/jquery":"3.5.16","@types/node":"18.14.0","@types/throttle-debounce":"5.0.0","babel-loader":"9.1.2",bootstrap:"5.2.3",cypress:"12.6.0","cypress-each":"1.13.1","cypress-storybook":"0.5.1","eslint-plugin-react":"7.32.2",globby:"13.1.3",jest:"26.6.3",rimraf:"4.1.2","rollup-plugin-node-polyfills":"0.2.1","rollup-plugin-scss":"4.0.0","rollup-plugin-visualizer":"5.9.0",sass:"1.58.3","start-server-and-test":"1.15.4","ts-jest":"26.5.6",typescript:"4.9.5"};const B={name:A,version:K,description:N,author:$,license:F,repository:E,homepage:T,bugs:J,main:M,module:P,es2015:U,es2017:D,"jsnext:main":"loader/index.es2017.js",types:H,collection:_,"collection:main":"dist/collection/index.js",unpkg:q,publishConfig:X,files:Z,scripts:G,dependencies:V,devDependencies:W};const Q="*,:host,*::before,*::after{-webkit-box-sizing:border-box;box-sizing:border-box}button{font:inherit;padding:0}img,svg{max-width:100%;max-height:100%}@media (forced-colors: active){svg{color:white}}.no-list{list-style:none;padding-left:0;margin-top:0;margin-bottom:0}.btn-blank{background-color:transparent;border:none;border-radius:0;padding:0}.nav-link{text-decoration:none;color:rgba(0, 0, 0, 0.8);-webkit-transition:color 200ms;transition:color 200ms;background-color:transparent;border-radius:0;-webkit-box-shadow:none;box-shadow:none;border:0;margin:0;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;gap:0.5rem}.nav-link:hover,.nav-link:focus{color:black}.nav-link>svg{width:1.4em;height:1.4em;-ms-flex-negative:0;flex-shrink:0}.nav-link>span{-ms-flex-negative:1;flex-shrink:1}.box>*:first-child{margin-top:0}.box>*:last-child{margin-bottom:0}.mirrored{-webkit-transform:scaleX(-1);transform:scaleX(-1)}.rotate-270{-webkit-transform:rotate(270deg);transform:rotate(270deg)}.bold{font-weight:700}.light{font-weight:300}.d-flex{display:-ms-flexbox;display:flex}.d-inline-flex{display:-ms-inline-flexbox;display:inline-flex}.align-items-center{-ms-flex-align:center;align-items:center}@media (min-width: 1441px){.wide-container{margin:0 auto;max-width:1440px}}@media (max-width: 599.98px){.container{padding-right:16px;padding-left:16px}}@media (min-width: 600px) and (max-width: 1023.98px){.container{padding-right:32px;padding-left:32px}}@media (min-width: 1024px){.container{padding-right:40px;padding-left:40px}}.visually-hidden{position:absolute;width:1px;height:1px;border:0;padding:0;margin:-1px;overflow:hidden;clip:rect(0 0 0 0)}@media (max-width: -0.02px){.hidden-xs{display:none}}@media (max-width: 399.98px){.hidden-sm{display:none}}@media (max-width: 599.98px){.hidden-rg{display:none}}@media (max-width: 779.98px){.hidden-md{display:none}}@media (max-width: 1023.98px){.hidden-lg{display:none}}@media (max-width: 1279.98px){.hidden-xl{display:none}}@media (max-width: 1440.98px){.hidden-xxl{display:none}}:host{display:block;position:relative;font-size:1rem;font-weight:300;z-index:var(--header-z-index, 10);--header-height:3.5rem;--meta-header-height:0px;--language-dropdown-margin-top:0px}@media (min-width: 1024px){:host{--meta-header-height:3rem;--header-height:4rem}}@media (min-width: 1280px){:host{--header-height:4.5rem}}:host([meta=false]){--meta-header-height:0px;--language-dropdown-margin-top:1px}@supports ((position: -webkit-sticky) or (position: sticky)){:host(:not(.stickyness-none)){position:-webkit-sticky;position:sticky}:host(.stickyness-full){top:0}:host(.stickyness-main){top:calc(var(--meta-header-height, 0px) * -1)}:host(.stickyness-minimal){top:calc((var(--header-height, 0px) + var(--meta-header-height, 0px)) * -1);-webkit-transition:top 200ms ease-in;transition:top 200ms ease-in}:host(.stickyness-minimal.scrolling-up),:host(.stickyness-minimal.dropdown-open){top:calc(var(--meta-header-height, 0px) * -1);-webkit-transition:top 200ms ease-out;transition:top 200ms ease-out}}.post-internet-header{border-bottom:1px solid #e6e6e6;background-color:white}.main-navigation-container{display:-ms-flexbox;display:flex}.main-navigation-container>.main-navigation-controls{-ms-flex:0 0 auto;flex:0 0 auto}.main-navigation{display:-ms-flexbox;display:flex}.sub-navigation-container{position:absolute;top:100%;left:0;width:100%;display:-ms-flexbox;display:flex;background:white;visibility:hidden}.main-navigation-item:hover .sub-navigation-container{visibility:visible}.main-navigation-controls{display:-ms-flexbox;display:flex;margin-left:auto}@media (max-width: 1023.98px){.main-navigation-controls{font-weight:400}}@media (min-width: 1024px){.main-navigation-controls{font-size:1.0625rem}}.main-navigation-controls>*{border-left:1px solid #e6e6e6}.menu-button{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;padding:0 calc(1rem - 1px);font-weight:300;cursor:pointer;border-left:1px solid #e6e6e6;-ms-flex-order:1;order:1;}@media (min-width: 1024px){.menu-button{display:none}}@media (min-width: 600px) and (max-width: 1023.98px){.menu-button .visually-hidden{position:static;width:auto;height:auto;margin:auto;overflow:visible;clip:auto;visibility:visible;margin-right:0.5rem}}.menu-button svg{width:1.5rem;height:1.5rem}.full-width .wide-container{max-width:none}";const Y=class{async getCurrentLanguage(){var t;return(t=c.currentLanguage)!==null&&t!==void 0?t:"de"}constructor(i){t(this,i);this.headerLoaded=e(this,"headerLoaded",7);this.lastScrollTop=window.scrollY||document.documentElement.scrollTop;this.lastWindowWidth=window.innerWidth;this.handleClickOutsideBound=this.handleClickOutside.bind(this);this.project=undefined;this.stickyness="minimal";this.language=undefined;this.meta=true;this.login=true;this.search=true;this.skiplinks=true;this.configProxy=undefined;this.environment="prod";this.languageSwitchOverrides=undefined;this.customConfig=undefined;this.languageCookieKey=undefined;this.languageLocalStorageKey="swisspost-internet-header-language";this.activeRoute="auto";this.osFlyoutOverrides=undefined;this.fullWidth=false;this.activeFlyout=null;this.activeDropdownElement=null;if(this.project===undefined||this.project===""||!I(this.project)){throw new Error(`Internet Header project key is "${this.project}". Please provide a valid project key.`)}}connectedCallback(){this.throttledScroll=o(300,(()=>this.handleScrollEvent()));this.debouncedResize=a(200,(()=>this.handleResize()));window.addEventListener("scroll",this.throttledScroll,{passive:true});window.addEventListener("resize",this.debouncedResize,{passive:true})}disconnectedCallback(){window.removeEventListener("scroll",this.throttledScroll);window.removeEventListener("resize",this.debouncedResize);h()}async componentWillLoad(){try{c.projectId=this.project;c.environment=this.environment;if(this.language!==undefined)c.currentLanguage=this.language;c.languageSwitchOverrides=typeof this.languageSwitchOverrides==="string"?JSON.parse(this.languageSwitchOverrides):this.languageSwitchOverrides;c.osFlyoutOverrides=typeof this.osFlyoutOverrides==="string"?JSON.parse(this.osFlyoutOverrides):this.osFlyoutOverrides;if(this.customConfig!==undefined&&c.currentLanguage!==null){c.localizedCustomConfig=L(this.customConfig,c.currentLanguage)}c.localizedConfig=await O({projectId:this.project,environment:this.environment,language:this.language,cookieKey:this.languageCookieKey,localStorageKey:this.languageLocalStorageKey,activeRouteProp:this.activeRoute,localizedCustomConfig:c.localizedCustomConfig,osFlyoutOverrides:c.osFlyoutOverrides})}catch(t){console.error(t)}}componentDidLoad(){window.requestAnimationFrame((()=>{this.handleResize();this.headerLoaded.emit();this.host.classList.add("header-loaded")}))}async handleLanguageChange(t){c.currentLanguage=t;c.localizedConfig=await O({projectId:this.project,environment:this.environment,language:t,cookieKey:this.languageCookieKey,localStorageKey:this.languageLocalStorageKey,activeRouteProp:this.activeRoute,localizedCustomConfig:c.localizedCustomConfig,osFlyoutOverrides:c.osFlyoutOverrides});if(this.customConfig)c.localizedCustomConfig=L(this.customConfig,t)}handleAvailableLanguagesChage(t){c.languageSwitchOverrides=typeof t==="string"?JSON.parse(t):t}async handleOsFlyoutOverrides(t){c.osFlyoutOverrides=typeof t==="string"?JSON.parse(t):t;c.localizedConfig=await O({projectId:this.project,environment:this.environment,language:this.language,cookieKey:this.languageCookieKey,localStorageKey:this.languageLocalStorageKey,activeRouteProp:this.activeRoute,localizedCustomConfig:c.localizedCustomConfig,osFlyoutOverrides:c.osFlyoutOverrides})}async handleActiveRouteChange(t){c.localizedConfig=await O({projectId:this.project,environment:this.environment,language:this.language,cookieKey:this.languageCookieKey,localStorageKey:this.languageLocalStorageKey,activeRouteProp:t,localizedCustomConfig:c.localizedCustomConfig,osFlyoutOverrides:c.osFlyoutOverrides})}async handleCustomConfigChange(t){if(this.language===undefined)return;const e=L(t,this.language);c.localizedCustomConfig=e;c.localizedConfig=await O({projectId:this.project,environment:this.environment,language:this.language,cookieKey:this.languageCookieKey,localStorageKey:this.languageLocalStorageKey,activeRouteProp:this.activeRoute,localizedCustomConfig:e,osFlyoutOverrides:c.osFlyoutOverrides})}handleSearchChange(t){c.search=t}handleLoginChange(t){c.login=t}handleMetaChange(t){c.meta=t}handleLanguageChangeEvent(t){this.handleLanguageChange(t.detail)}handleClickOutside(t){if(this.activeDropdownElement&&!t.composedPath().includes(this.activeDropdownElement)){this.activeDropdownElement.toggleDropdown(false)}}handleKeyUp(t){if(t.key==="Escape"){if(this.activeDropdownElement){this.activeDropdownElement.toggleDropdown(false)}if(this.activeFlyout!==null&&this.mainNav){this.mainNav.toggleDropdown(false)}}}handleScrollEvent(){const t=window.scrollY||document.documentElement.scrollTop;if(this.stickyness==="minimal"){this.host.classList.toggle("scrolling-up",t<=this.lastScrollTop)}this.lastScrollTop=t<=0?0:t}handleResize(){var t;if(this.isMainNavOpen()&&this.lastWindowWidth<1024&&window.innerWidth>=1024){(t=this.activeDropdownElement)===null||t===void 0?void 0:t.toggleDropdown(false)}this.lastWindowWidth=window.innerWidth}handleDropdownToggled(t){if(!t.detail.open&&this.activeDropdownElement!==t.detail.element){return}if(t.detail.open===true){if(this.activeDropdownElement){this.activeDropdownElement.toggleDropdown(false)}this.activeDropdownElement=t.detail.element;if(window.innerWidth>=1024){window.setTimeout((()=>{window.addEventListener("click",this.handleClickOutsideBound)}),10)}if(this.activeFlyout!==null&&this.mainNav){this.mainNav.setActiveFlyout(null)}}else{this.activeDropdownElement=null;window.removeEventListener("click",this.handleClickOutsideBound)}}handleFlyoutToggled(t){this.activeFlyout=t.detail;if(this.activeDropdownElement&&t.detail&&!this.isMainNavOpen()){this.activeDropdownElement.toggleDropdown(false)}}toggleMobileDropdown(){var t;(t=this.mainNav)===null||t===void 0?void 0:t.toggleDropdown()}isMainNavOpen(){return this.activeDropdownElement&&this.activeDropdownElement.tagName==="POST-MAIN-NAVIGATION"}render(){var t,e,s;if(!((t=c.localizedConfig)===null||t===void 0?void 0:t.header)){console.error(new Error("Internet Header: Config cannot be loaded"));return}const o=c.localizedConfig;const a=this.meta&&o.header.navMeta!==undefined&&((e=o.header.navMeta)===null||e===void 0?void 0:e.filter((t=>!t.isHomeLink)).length)>0;const r=((s=this.login)!==null&&s!==void 0?s:!o.header.isLoginWidgetHidden)&&o.header.loginWidgetOptions;const l=o.header.navLang.length>1;return i(n,{class:`stickyness-${this.stickyness} ${this.activeDropdownElement||this.activeFlyout?"dropdown-open":""}`,"data-version":B.version,onKeyup:t=>this.handleKeyUp(t)},i("header",{class:`post-internet-header${this.fullWidth?" full-width":""}`},i(u,null),i(g,{condition:this.skiplinks===true},i("post-skiplinks",null)),i(g,{condition:a===true},i("post-meta-navigation",{orientation:"horizontal",class:"hidden-lg","full-width":this.fullWidth},i(g,{condition:l===true},i("post-language-switch",{id:"post-language-switch-desktop",mode:"dropdown",onDropdownToggled:t=>this.handleDropdownToggled(t)})))),i("div",{class:"main-navigation-container wide-container"},i("post-logo",null),i("button",{class:"menu-button nav-link",onClick:()=>this.toggleMobileDropdown()},i("span",{class:"menu-button-text visually-hidden"},o.header.mobileMenu.text),i(p,{name:this.isMainNavOpen()?"pi-close":"pi-menu"})),i("post-main-navigation",{onDropdownToggled:t=>this.handleDropdownToggled(t),onFlyoutToggled:t=>this.handleFlyoutToggled(t),ref:t=>this.mainNav=t},i(g,{condition:a===true},i("post-meta-navigation",{orientation:"vertical"},i(g,{condition:l===true},i("post-language-switch",{id:"post-language-switch-mobile",mode:"list"}))))),i("div",{class:"main-navigation-controls"},i(g,{condition:this.search!==false},i("post-search",{onDropdownToggled:t=>this.handleDropdownToggled(t)})),i(g,{condition:!!r},i("post-klp-login-widget",null,i("slot",{name:"login-widget"}))),i(g,{condition:a===false&&l===true},i("post-language-switch",{id:"post-language-switch-no-meta",onDropdownToggled:t=>this.handleDropdownToggled(t),mode:"dropdown"})),i("slot",{name:"main"})))))}get host(){return s(this)}static get watchers(){return{language:["handleLanguageChange"],languageSwitchOverrides:["handleAvailableLanguagesChage"],osFlyoutOverrides:["handleOsFlyoutOverrides"],activeRoute:["handleActiveRouteChange"],customConfig:["handleCustomConfigChange"],search:["handleSearchChange"],login:["handleLoginChange"],meta:["handleMetaChange"]}}};Y.style=Q;export{Y as swisspost_internet_header};
//# sourceMappingURL=p-fc84f999.entry.js.map