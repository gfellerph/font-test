{"version":3,"names":["PostFooterBlockCustom","props","h","class","block","title","links","map","link","key","url","href","target","text","PostFooterBlockList","PostFooterBlockSocials","content","name","icon","PostFooterBlockAddress","filter","address","innerHTML","length","getContentHours","hours","replace","callUnblu","window","console","error","LiveSupport","id","type","onClick","PostFooterBlockContact","index","isLiveSupport","liveSupportEnabled","number","describe","postInternetFooterCss","PostInternetFooter","constructor","hostRef","this","unbluEnabled","intervalId","runs","checker","isEnabled","clearInterval","setInterval","render","state","warn","localizedConfig","footer","projectId","document","querySelector","footerConfig","customFooterConfig","_a","localizedCustomConfig","Host","SvgSprite","columnType","entry"],"sources":["./src/components/post-internet-footer/components/post-footer-block-custom.component.tsx","./src/components/post-internet-footer/components/post-footer-block-list.component.tsx","./src/components/post-internet-footer/components/post-footer-block-socials.component.tsx","./src/components/post-internet-footer/components/post-footer-block-address.component.tsx","./src/components/post-internet-footer/components/post-footer-block-contact.component.tsx","./src/components/post-internet-footer/post-internet-footer.scss?tag=swisspost-internet-footer&encapsulation=shadow","./src/components/post-internet-footer/post-internet-footer.tsx"],"sourcesContent":["import { h } from '@stencil/core';\r\nimport { CustomBlockEntity } from '../../../models/footer.model';\r\n\r\nexport const PostFooterBlockCustom = (props: { block: CustomBlockEntity }) => {\r\n  return (\r\n    <div class=\"pre-footer\">\r\n      <div class=\"block-custom container\">\r\n        <h3>{props.block.title}</h3>\r\n        <ul class=\"no-list box link-list\">\r\n          {props.block.links &&\r\n            props.block.links.map(link => (\r\n              <li key={link.url}>\r\n                <a class=\"flyout-link\" href={link.url} target={link.target}>\r\n                  {link.text}\r\n                </a>\r\n              </li>\r\n            ))}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import { h } from '@stencil/core';\r\nimport { CustomBlockEntity } from '../../../models/footer.model';\r\n\r\nexport const PostFooterBlockList = (props: { block: CustomBlockEntity; key: string }) => {\r\n  return (\r\n    <div class=\"block-list\">\r\n      <h3>{props.block.title}</h3>\r\n      <ul class=\"no-list box link-list\">\r\n        {props.block.links &&\r\n          props.block.links.map(link => (\r\n            <li key={link.url}>\r\n              <a class=\"flyout-link\" href={link.url} target={link.target}>\r\n                {link.text}\r\n              </a>\r\n            </li>\r\n          ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n","import { h } from '@stencil/core';\r\nimport { ContentEntity } from '../../../models/footer.model';\r\n\r\nexport const PostFooterBlockSocials = (props: { content: ContentEntity; key: string }) => {\r\n  return (\r\n    <div class=\"block-socials\">\r\n      <h3>{props.content.title}</h3>\r\n      <ul class=\"no-list socials\">\r\n        {props.content.links.map(link => (\r\n          <li key={link.url}>\r\n            <a href={link.url} target={link.target}>\r\n              <span class=\"visually-hidden\">{link.name}</span>\r\n              <svg aria-hidden=\"true\">\r\n                <use href={`#${link.icon}`} />\r\n              </svg>\r\n            </a>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n","import { h } from '@stencil/core';\r\nimport { BlockEntity } from '../../../models/footer.model';\r\nimport { PostFooterBlockSocials } from './post-footer-block-socials.component';\r\n\r\nexport const PostFooterBlockAddress = (props: { block: BlockEntity; key: string }) => {\r\n  return (\r\n    <div class=\"block-address\">\r\n      <h3>{props.block.title}</h3>\r\n      {props.block.content &&\r\n        props.block.content\r\n          .filter(content => content.address)\r\n          .map(content => (\r\n            <address class=\"vcard\" key={content.address}>\r\n              <span class=\"adr\" innerHTML={content.address}></span>\r\n            </address>\r\n          ))}\r\n      {props.block.content &&\r\n        props.block.content\r\n          .filter(content => content.links && content.links.length)\r\n          .map(content => <PostFooterBlockSocials key={content.name} content={content} />)}\r\n    </div>\r\n  );\r\n};\r\n","import { h } from '@stencil/core';\r\nimport { BlockEntity } from '../../../models/footer.model';\r\n\r\nconst getContentHours = (hours: string) => hours.replace(/<[^>]*>?/gm, '');\r\n\r\nconst callUnblu = () => {\r\n  if (typeof window['unbluLSLoad'] === 'function') {\r\n    window['unbluLSLoad']();\r\n  } else {\r\n    console.error(\r\n      'swisspost-internet-footer: The function \"unbluLSLoad\" could not be called because it is not available in the global scope. Did you include the unblu live chat script on your page?',\r\n    );\r\n  }\r\n};\r\n\r\nconst LiveSupport = (props: { hours: string }) => (\r\n  <button\r\n    class=\"hours btn btn-link\"\r\n    id=\"liveSupport\"\r\n    type=\"button\"\r\n    onClick={callUnblu}\r\n    innerHTML={getContentHours(props.hours)}\r\n  ></button>\r\n);\r\n\r\nexport const PostFooterBlockContact = (props: {\r\n  block: BlockEntity;\r\n  liveSupportEnabled: boolean;\r\n  key: string;\r\n}) => {\r\n  return (\r\n    <div class=\"block-contact\">\r\n      <h3>{props.block.title}</h3>\r\n      {props.block.content &&\r\n        props.block.content.map((content, index) => {\r\n          const isLiveSupport =\r\n            index === props.block.content!.length - 1 && content.text === 'Live Support';\r\n          if (isLiveSupport && !props.liveSupportEnabled) {\r\n            return null;\r\n          }\r\n          return (\r\n            <div class=\"content-row\" key={content.name}>\r\n              {content.number ? <p class=\"number\">{content.number}</p> : null}\r\n              {content.text ? <p class=\"text\">{content.text}</p> : null}\r\n              {content.hours && isLiveSupport && <LiveSupport hours={content.hours} />}\r\n              {content.hours && !isLiveSupport && (\r\n                // Some values arrive in the form of <p>8&emdash;12</p> and without replace and innerHTML, tags get rendered as text (project=\"klp\" language=\"en\" environment=\"int02\")\r\n                <p class=\"hours\" innerHTML={getContentHours(content.hours)}></p>\r\n              )}\r\n              {content.describe ? <p class=\"describe\">{content.describe}</p> : null}\r\n            </div>\r\n          );\r\n        })}\r\n    </div>\r\n  );\r\n};\r\n","@use \"@swisspost/design-system-styles/components/grid\";\r\n@use \"@swisspost/design-system-styles/variables/color\";\r\n@use \"@swisspost/design-system-styles/placeholders/text\";\r\n@use \"@swisspost/design-system-styles/functions\";\r\n@use \"@swisspost/design-system-styles/components/button\";\r\n@use \"../../utils/utils.scss\";\r\n@use \"../../utils/mixins.scss\";\r\n\r\n:host {\r\n  display: block;\r\n}\r\n\r\nh3 {\r\n  font-size: inherit;\r\n  margin-top: 0;\r\n}\r\n\r\n.btn.btn-link {\r\n  padding-left: 0;\r\n  padding-right: 0;\r\n\r\n  &:hover {\r\n    cursor: pointer;\r\n  }\r\n}\r\n\r\n.post-internet-footer {\r\n  font-size: 1rem;\r\n  font-weight: 300;\r\n  border-top: 2px solid color.$gray-10;\r\n}\r\n\r\n.pre-footer {\r\n  padding-top: 2rem;\r\n  padding-bottom: 2rem;\r\n  border-bottom: 2px solid color.$gray-10;\r\n\r\n  .block-custom,\r\n  .link-list {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    gap: 1rem 1.5rem;\r\n  }\r\n\r\n  h3,\r\n  .link-list li {\r\n    margin: 0;\r\n  }\r\n}\r\n\r\n.footer-container {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr 1fr 1fr;\r\n  gap: 3.5rem 2rem;\r\n  margin-top: 3.5rem;\r\n  margin-bottom: 3.5rem;\r\n\r\n  @include mixins.max(lg) {\r\n    grid-template-columns: 1fr 1fr;\r\n  }\r\n\r\n  @include mixins.max(rg) {\r\n    gap: 1.5rem 2rem;\r\n    margin-top: 1.5rem;\r\n    margin-bottom: 1.5rem;\r\n  }\r\n}\r\n\r\n.block-list {\r\n  @include mixins.max(sm) {\r\n    grid-column: 1 / 3;\r\n  }\r\n}\r\n\r\n.block-contact,\r\n.block-address {\r\n  @include mixins.max(rg) {\r\n    grid-column: 1 / 3;\r\n  }\r\n}\r\n\r\n.block-socials {\r\n  margin-top: 3.5rem;\r\n\r\n  @include mixins.max(rg) {\r\n    margin-top: 1.5rem;\r\n  }\r\n}\r\n\r\naddress {\r\n  font-style: normal;\r\n}\r\n\r\n.link-list {\r\n  li {\r\n    margin: 1rem 0;\r\n  }\r\n  a {\r\n    display: block;\r\n    text-decoration: none;\r\n    color: color.$gray-60;\r\n    transition: color 200ms;\r\n\r\n    &:hover {\r\n      color: black;\r\n    }\r\n  }\r\n}\r\n\r\n.content-row {\r\n  padding: 0.5rem 0;\r\n\r\n  h3 + & {\r\n    padding-top: 0;\r\n  }\r\n\r\n  &:last-child {\r\n    padding-bottom: 0;\r\n  }\r\n\r\n  & + & {\r\n    border-top: 1px solid color.$gray-10;\r\n  }\r\n\r\n  p,\r\n  button {\r\n    margin: 0.25rem;\r\n  }\r\n}\r\n\r\n.text {\r\n  font-weight: 700;\r\n}\r\n\r\n.describe {\r\n  font-size: 0.8125rem;\r\n  color: color.$gray-60;\r\n  font-weight: 400;\r\n}\r\n\r\n.number {\r\n  font-size: 1.25rem;\r\n}\r\n\r\n.socials {\r\n  display: inline-grid;\r\n  grid-auto-flow: row;\r\n  grid-template-columns: repeat(4, 1fr);\r\n  gap: 1rem 1.5rem;\r\n\r\n  a {\r\n    display: block;\r\n    color: color.$gray-60;\r\n    transition: color 200ms;\r\n\r\n    &:hover,\r\n    &:focus {\r\n      color: black;\r\n    }\r\n  }\r\n\r\n  svg {\r\n    display: block;\r\n    width: 1.5rem;\r\n    height: 1.5rem;\r\n  }\r\n}\r\n\r\n.copyright {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 0.5rem 1.5rem;\r\n  margin-top: 2rem;\r\n  margin-bottom: 2rem;\r\n  font-size: functions.px-to-rem(12px);\r\n}\r\n\r\n.footer-meta-links {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 0.5rem;\r\n  font-weight: 400;\r\n}\r\n","import { Component, Host, h, State } from '@stencil/core';\r\nimport { state } from '../../data/store';\r\nimport { SvgSprite } from '../../utils/svg-sprite.component';\r\nimport { PostFooterBlockCustom } from './components/post-footer-block-custom.component';\r\nimport { PostFooterBlockList } from './components/post-footer-block-list.component';\r\nimport { PostFooterBlockAddress } from './components/post-footer-block-address.component';\r\nimport { PostFooterBlockContact } from './components/post-footer-block-contact.component';\r\n\r\n@Component({\r\n  tag: 'swisspost-internet-footer',\r\n  styleUrl: 'post-internet-footer.scss',\r\n  shadow: true,\r\n})\r\nexport class PostInternetFooter {\r\n  @State() liveSupportEnabled = false;\r\n\r\n  constructor() {\r\n    this.liveSupportEnabled = this.unbluEnabled();\r\n\r\n    /**\r\n     * If the unblu script is not available, wait 5 seconds for it to load.\r\n     * If it's still not there after 5 seconds, abandon efforts and don't\r\n     * show the live support button.\r\n     */\r\n    if (!this.liveSupportEnabled) {\r\n      let intervalId: number;\r\n      let runs = 0;\r\n\r\n      const checker = () => {\r\n        const isEnabled = this.unbluEnabled();\r\n        if (isEnabled) {\r\n          this.liveSupportEnabled = true;\r\n        }\r\n        if (isEnabled || runs >= 5) {\r\n          window.clearInterval(intervalId);\r\n        }\r\n        runs++;\r\n      };\r\n\r\n      intervalId = window.setInterval(checker, 1000);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if the unblu live support script is loaded\r\n   * @returns Boolean\r\n   */\r\n  private unbluEnabled(): boolean {\r\n    return typeof window['unbluLSLoad'] === 'function';\r\n  }\r\n\r\n  render() {\r\n    // There is something wrong entirely\r\n    if (!state) {\r\n      console.warn(\r\n        `Internet Footer: Could not load config. Please make sure that you included the <swisspost-internet-header></swisspost-internet-header> component.`,\r\n      );\r\n      return null;\r\n    }\r\n\r\n    // Config has not loaded yet\r\n    if (!state.localizedConfig) {\r\n      return null;\r\n    }\r\n\r\n    // There's no footer config\r\n    if (!state.localizedConfig.footer) {\r\n      console.warn(\r\n        `Internet Footer: Current project \"${state.projectId}\" does not include a footer config. The footer will not be rendered. Remove `,\r\n        document.querySelector('swisspost-internet-footer'),\r\n        `from your markup or configure the footer in your portal config to stop seeing this warning.`,\r\n      );\r\n      return null;\r\n    }\r\n\r\n    const footerConfig = state.localizedConfig.footer;\r\n    const customFooterConfig = state.localizedCustomConfig?.footer;\r\n\r\n    return (\r\n      <Host>\r\n        <SvgSprite />\r\n        <footer class=\"post-internet-footer light font-curve-regular\">\r\n          <h2 class=\"visually-hidden\">{footerConfig.title}</h2>\r\n          {customFooterConfig?.block && <PostFooterBlockCustom block={customFooterConfig?.block} />}\r\n          <div class=\"footer-container container\">\r\n            {footerConfig.block\r\n              .filter(block => block.columnType === 'list')\r\n              .map(block => (\r\n                <PostFooterBlockList key={block.title} block={block} />\r\n              ))}\r\n            {footerConfig.block\r\n              .filter(block => block.columnType === 'contact')\r\n              .map(block => (\r\n                <PostFooterBlockContact\r\n                  key={block.title}\r\n                  block={block}\r\n                  liveSupportEnabled={this.liveSupportEnabled}\r\n                />\r\n              ))}\r\n            {footerConfig.block\r\n              .filter(block => block.columnType === 'address')\r\n              .map(block => (\r\n                <PostFooterBlockAddress key={block.title} block={block} />\r\n              ))}\r\n          </div>\r\n          <div class=\"copyright container\">\r\n            <span class=\"bold\">{footerConfig.entry.text}</span>\r\n            <ul class=\"no-list footer-meta-links\">\r\n              {footerConfig.links\r\n                ? footerConfig.links.map(link => (\r\n                    <li key={link.url}>\r\n                      <a class=\"nav-link\" href={link.url} target={link.target}>\r\n                        {link.text}\r\n                      </a>\r\n                    </li>\r\n                  ))\r\n                : null}\r\n            </ul>\r\n          </div>\r\n        </footer>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"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"}